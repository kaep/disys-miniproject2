syntax = "proto3"; 
package chittychat;

option go_package = "./disysminiproject2"; 

service ChittyChat {
    rpc Publish (MessageWithLamport) returns (Empty) {}
    rpc Broadcast (MessageWithLamport) returns (Empty) {}
    rpc EstablishConnection (ConnectionRequest) returns (stream MessageWithLamport) {}
    rpc RecieveBroadcast (MessageWithLamport) returns (Empty) {}
    rpc Leave (LeaveRequest) returns (Empty) {}

   
}

message Lamport {
    int32 Counter = 1; 
}

message MessageWithLamport {
    string Message = 1; 
    Lamport Time = 2;
    int32 Id = 3; //great feature 
}

message Empty {}

message ConnectionRequest {
    string Name = 1; 
}

message LeaveRequest {
    int32 Id = 1; 
}



//compile kommando 
//skal køres når vi har ændret denne fil 
//protoc --go_out=. --go_opt=paths=source_relative --go-grpc_out=. --go-grpc_opt=paths=source_relative chittychat.proto 